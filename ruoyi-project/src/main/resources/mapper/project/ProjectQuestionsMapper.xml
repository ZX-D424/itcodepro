<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ruoyi.project.mapper.ProjectQuestionsMapper">
    
    <resultMap type="ProjectQuestions" id="ProjectQuestionsResult">
        <result property="id"    column="id"    />
        <result property="moduleId"    column="module_id"    />
        <result property="levelId"    column="level_id"    />
        <result property="userId"    column="user_id"    />
        <result property="imgUrl"    column="img_url"    />
        <result property="mark"    column="mark"    />
        <result property="fileUrl"    column="file_url"    />
        <result property="submitTime"    column="submit_time"    />
        <result property="startTime"    column="start_time"    />
        <result property="checkUserId"    column="check_user_id"    />
        <result property="checkTime"    column="check_time"    />
        <result property="score"    column="score"    />
        <result property="checkMark"    column="check_mark"    />
    </resultMap>

    <sql id="selectProjectQuestionsVo">
        select id, module_id, level_id, user_id, img_url, mark, file_url, submit_time, start_time, check_user_id, check_time, score, check_mark from project_questions
    </sql>

    <select id="selectProjectQuestionsList" parameterType="ProjectQuestions" resultMap="ProjectQuestionsResult">
        <include refid="selectProjectQuestionsVo"/>
        <where>  
            <if test="moduleId != null "> and module_id = #{moduleId}</if>
            <if test="levelId != null "> and level_id = #{levelId}</if>
            <if test="userId != null "> and user_id = #{userId}</if>
            <if test="checkUserId != null "> and check_user_id = #{checkUserId}</if>
        </where>
    </select>
    
    <select id="selectProjectQuestionsById" parameterType="Long" resultMap="ProjectQuestionsResult">
        <include refid="selectProjectQuestionsVo"/>
        where id = #{id}
    </select>

    <insert id="insertProjectQuestions" parameterType="ProjectQuestions" useGeneratedKeys="true" keyProperty="id">
        insert into project_questions
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="moduleId != null">module_id,</if>
            <if test="levelId != null">level_id,</if>
            <if test="userId != null">user_id,</if>
            <if test="imgUrl != null">img_url,</if>
            <if test="mark != null">mark,</if>
            <if test="fileUrl != null">file_url,</if>
            <if test="submitTime != null">submit_time,</if>
            <if test="startTime != null">start_time,</if>
            <if test="checkUserId != null">check_user_id,</if>
            <if test="checkTime != null">check_time,</if>
            <if test="score != null">score,</if>
            <if test="checkMark != null">check_mark,</if>
         </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="moduleId != null">#{moduleId},</if>
            <if test="levelId != null">#{levelId},</if>
            <if test="userId != null">#{userId},</if>
            <if test="imgUrl != null">#{imgUrl},</if>
            <if test="mark != null">#{mark},</if>
            <if test="fileUrl != null">#{fileUrl},</if>
            <if test="submitTime != null">#{submitTime},</if>
            <if test="startTime != null">#{startTime},</if>
            <if test="checkUserId != null">#{checkUserId},</if>
            <if test="checkTime != null">#{checkTime},</if>
            <if test="score != null">#{score},</if>
            <if test="checkMark != null">#{checkMark},</if>
         </trim>
    </insert>

    <update id="updateProjectQuestions" parameterType="ProjectQuestions">
        update project_questions
        <trim prefix="SET" suffixOverrides=",">
            <if test="moduleId != null">module_id = #{moduleId},</if>
            <if test="levelId != null">level_id = #{levelId},</if>
            <if test="userId != null">user_id = #{userId},</if>
            <if test="imgUrl != null">img_url = #{imgUrl},</if>
            <if test="mark != null">mark = #{mark},</if>
            <if test="fileUrl != null">file_url = #{fileUrl},</if>
            <if test="submitTime != null">submit_time = #{submitTime},</if>
            <if test="startTime != null">start_time = #{startTime},</if>
            <if test="checkUserId != null">check_user_id = #{checkUserId},</if>
            <if test="checkTime != null">check_time = #{checkTime},</if>
            <if test="score != null">score = #{score},</if>
            <if test="checkMark != null">check_mark = #{checkMark},</if>
        </trim>
        where id = #{id}
    </update>

    <delete id="deleteProjectQuestionsById" parameterType="Long">
        delete from project_questions where id = #{id}
    </delete>

    <delete id="deleteProjectQuestionsByIds" parameterType="String">
        delete from project_questions where id in 
        <foreach item="id" collection="array" open="(" separator="," close=")">
            #{id}
        </foreach>
    </delete>

    <select id="selectProjectQuestionsByUserIdAndLevelId" parameterType="Long" resultType="Long">
        select
            id
        from
            project_questions
        where
            module_id = #{moduleId} and user_id = #{userId} and level_id = #{levelId}
    </select>


</mapper>